input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type TShirt @model {
  styleNumber: String! @primaryKey
  brand: String!
  color: String!
  size: TShirtSize!
  type: TShirtType!
  quantityOnHand: Int @default(value: "0")
  isDeleted: Boolean @default(value: "false")
}

enum TShirtSize {
  NB
  SixMonths
  TwelveMonths
  EighteenMonths
  TwoT
  ThreeT
  FourT
  FiveT
  YXS
  YS
  YM
  YL
  YXL
  AS
  AM
  AL
  AXL
  TwoX
  ThreeX
  FourX
  FiveX
}

enum TShirtType {
  Cotton
  Drifit
  Blend
}

type PurchaseOrder @model {
  id: ID!
  orderNumber: String! # Optional for admin to track
  vendor: String!
  orderedItems: [TShirtOrder!] @hasMany
  status: POStatus!
  changeHistory: [PurchaseOrderChange!] @hasMany
  isDeleted: Boolean @default(value: "false")
}

enum POStatus {
  Open
  Closed
}

type PurchaseOrderChange @model {
  tshirt: TShirt! @hasOne
  quantityChange: Int! # the delta for qtyOnHand
  orderedQuantityChange: Int!
  reason: String!
}

type CustomerOrderChange @model {
  tshirt: TShirt! @hasOne
  orderedQuantityChange: Int!
  reason: String!
}

type TShirtOrder @model {
  tshirt: TShirt! @hasOne
  quantity: Int!
  amountReceived: Int @default(value: "0") # This is only used for PurchaseOrder
}

type CustomerOrder @model {
  id: ID!

  customerName: String!
  customerEmail: AWSEmail
  customerPhoneNumber: AWSPhone

  orderedItems: [TShirtOrder!] @hasMany
  orderNumber: String!
  orderStatus: CustomerOrderStatus!
  orderNotes: String

  dateNeededBy: AWSDateTime!
  changeHistory: [CustomerOrderChange!] @hasMany

  isDeleted: Boolean @default(value: "false")
}

enum CustomerOrderStatus {
  NEW
  IN_PROGRESS
  BLOCKED
  COMPLETED
}